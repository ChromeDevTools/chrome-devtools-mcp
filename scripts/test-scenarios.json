{
  "version": "1.1.0",
  "description": "Test scenarios for chrome-ai-bridge regression and smoke testing",
  "scenarios": [
    {
      "id": "chatgpt-new-chat",
      "name": "ChatGPT 新規チャット",
      "provider": "chatgpt",
      "tags": ["smoke", "chatgpt"],
      "question": {
        "template": "JavaScriptのconstとletの違いを1文で。ID:{{timestamp}}"
      },
      "assertions": {
        "minAnswerLength": 20,
        "relevanceThreshold": 0.2,
        "maxTotalMs": 60000
      }
    },
    {
      "id": "chatgpt-existing-chat",
      "name": "ChatGPT 既存チャット再接続",
      "provider": "chatgpt",
      "tags": ["regression", "chatgpt"],
      "setup": {
        "requireExistingTab": true,
        "instruction": "ChatGPTで会話を開いた状態で実行"
      },
      "question": {
        "template": "Pythonのリスト内包表記を1文で。ID:{{timestamp}}"
      },
      "assertions": {
        "minAnswerLength": 20,
        "relevanceThreshold": 0.2,
        "noFallback": true
      }
    },
    {
      "id": "chatgpt-thinking-mode",
      "name": "ChatGPT Thinkingモード",
      "provider": "chatgpt",
      "tags": ["regression", "chatgpt", "thinking"],
      "question": {
        "template": "このコードのバグを見つけて: function f(x) { if(x = 5) return true; } ID:{{timestamp}}"
      },
      "assertions": {
        "minAnswerLength": 50,
        "relevanceThreshold": 0.15,
        "noEmptyMarkdown": true
      }
    },
    {
      "id": "gemini-new-chat",
      "name": "Gemini 新規チャット",
      "provider": "gemini",
      "tags": ["smoke", "gemini"],
      "question": {
        "template": "TypeScriptのジェネリクスを1文で。ID:{{timestamp}}"
      },
      "assertions": {
        "minAnswerLength": 20,
        "relevanceThreshold": 0.2
      }
    },
    {
      "id": "parallel-query",
      "name": "ChatGPT+Gemini 並列クエリ",
      "provider": "both",
      "tags": ["smoke", "parallel"],
      "question": {
        "template": "HTTPステータスコード404の意味を1文で。ID:{{timestamp}}"
      },
      "assertions": {
        "bothMustSucceed": true,
        "minAnswerLength": 10
      }
    },
    {
      "id": "gemini-existing-chat",
      "name": "Gemini 既存チャット再接続",
      "provider": "gemini",
      "tags": ["regression", "gemini"],
      "setup": {
        "requireExistingTab": true,
        "instruction": "Geminiで会話を開いた状態で実行"
      },
      "question": {
        "template": "Pythonのデコレータを1文で。ID:{{timestamp}}"
      },
      "assertions": {
        "minAnswerLength": 20,
        "relevanceThreshold": 0.2
      }
    },
    {
      "id": "chatgpt-code-block",
      "name": "ChatGPT コードブロック応答",
      "provider": "chatgpt",
      "tags": ["smoke", "chatgpt", "code"],
      "question": {
        "template": "JavaScriptで文字列を反転する関数を書いて。ID:{{timestamp}}"
      },
      "assertions": {
        "minAnswerLength": 30
      }
    },
    {
      "id": "gemini-code-block",
      "name": "Gemini コードブロック応答",
      "provider": "gemini",
      "tags": ["smoke", "gemini", "code"],
      "question": {
        "template": "TypeScriptでasync/awaitの基本例を書いて。ID:{{timestamp}}"
      },
      "assertions": {
        "minAnswerLength": 50,
        "relevanceThreshold": 0.15
      }
    },
    {
      "id": "chatgpt-long-response",
      "name": "ChatGPT 長い応答",
      "provider": "chatgpt",
      "tags": ["chatgpt"],
      "question": {
        "template": "オブジェクト指向プログラミングの3原則（カプセル化、継承、ポリモーフィズム）を簡潔に説明して。ID:{{timestamp}}"
      },
      "assertions": {
        "minAnswerLength": 100,
        "maxTotalMs": 90000
      }
    },
    {
      "id": "chatgpt-sequential",
      "name": "ChatGPT 連続プロンプト",
      "provider": "chatgpt",
      "tags": ["regression", "chatgpt", "sequential"],
      "setup": {
        "requireExistingTab": true,
        "instruction": "ChatGPTで会話を開いた状態で実行（連続質問テスト）"
      },
      "question": {
        "template": "前の回答に関連して、その概念を1行コードで示して。ID:{{timestamp}}"
      },
      "assertions": {
        "minAnswerLength": 10,
        "relevanceThreshold": 0.1
      },
      "notes": "連続プロンプトによるセッション状態とレート制限の確認"
    },
    {
      "id": "gemini-sequential",
      "name": "Gemini 連続プロンプト",
      "provider": "gemini",
      "tags": ["regression", "gemini", "sequential"],
      "setup": {
        "requireExistingTab": true,
        "instruction": "Geminiで会話を開いた状態で実行（連続質問テスト）"
      },
      "question": {
        "template": "前の回答をより短く要約して。ID:{{timestamp}}"
      },
      "assertions": {
        "minAnswerLength": 10,
        "relevanceThreshold": 0.1
      },
      "notes": "連続プロンプトによるStuck State発生の確認"
    },
    {
      "id": "chatgpt-markdown-extraction",
      "name": "ChatGPT マークダウン抽出",
      "provider": "chatgpt",
      "tags": ["regression", "chatgpt", "extraction"],
      "question": {
        "template": "以下の形式で回答して:\\n1. 見出し（##）\\n2. 箇条書き（- ）\\n3. コードブロック（```）\\n内容: Gitの基本コマンド3つ。ID:{{timestamp}}"
      },
      "assertions": {
        "minAnswerLength": 50,
        "noEmptyMarkdown": true
      },
      "notes": "マークダウン要素の抽出が正しく行われることを確認"
    },
    {
      "id": "gemini-long-response",
      "name": "Gemini 長い応答",
      "provider": "gemini",
      "tags": ["gemini"],
      "question": {
        "template": "RESTful APIの設計原則を5つ、それぞれ2文で説明して。ID:{{timestamp}}"
      },
      "assertions": {
        "minAnswerLength": 200,
        "maxTotalMs": 120000
      },
      "notes": "長い応答の完了検出とテキスト抽出の確認"
    },
    {
      "id": "chatgpt-thinking-complex",
      "name": "ChatGPT Thinking 複雑な問題",
      "provider": "chatgpt",
      "tags": ["regression", "chatgpt", "thinking"],
      "question": {
        "template": "この再帰関数のバグと修正方法を説明して: function fib(n) { return fib(n-1) + fib(n-2); } ID:{{timestamp}}"
      },
      "assertions": {
        "minAnswerLength": 80,
        "noEmptyMarkdown": true,
        "maxTotalMs": 180000
      },
      "notes": "Thinkingモードが発動する複雑な問題での応答抽出確認"
    },
    {
      "id": "parallel-code-generation",
      "name": "並列 コード生成比較",
      "provider": "both",
      "tags": ["parallel", "code"],
      "question": {
        "template": "TypeScriptでシンプルなスタック（push/pop）を実装して。ID:{{timestamp}}"
      },
      "assertions": {
        "bothMustSucceed": true,
        "minAnswerLength": 50
      },
      "notes": "両AIのコード生成応答を比較確認"
    }
  ]
}
